<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PW status</title>
    <link rel="shortcut icon" href="/favicon-status.png" type="image/png" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="nipa.js"></script>
    <script src="status.js"></script>
    <script>
        nipa_load_sitemap();
        nipa_load_sponsors();
        do_it();
    </script>
    <link rel="stylesheet" href="nipa.css">
    <style>
      th {
	  padding: 0.5em;
      }

      td {
	  padding: 0px;
	  padding-left: 0.5em;
	  padding-right: 0.5em;
      }
    </style>
</head>
<body>
<div id="sitemap"></div>
<div class="row">
    <div class="column">
        <h3>Build processing</h3>
        <table id="runners">
            <tr>
                <th>Tree</th>
                <th>Qlen</th>
                <th>Last</th>
                <th>Tid</th>
                <th>Test</th>
                <th>Pid</th>
                <th>Patch</th>
            </tr>
        </table>
        <br />
        <table id="systemd">
            <tr>
                <th>Service</th>
                <th>Status</th>
                <th>Tasks</th>
                <th>CPU cores</th>
                <th>Memory Use</th>
            </tr>
        </table>
        <br />
	<h3>Flakiest tests</h3>
        <table id="flakes">
            <tr>
                <th>Remote</th>
                <th>Executor</th>
                <th>Test</th>
                <th colspan="4">Flakes (by week: this, 1, 2, 3 ago)</th>
		<th>Ignored</th>
            </tr>
        </table>
    </div>
    <div class="column">
        <h3>Continuous testing results</h3>
        <div align="right">
            <input type="checkbox" id="contest-summary" checked />
            <label for="contest-summary">Hide all-pass runs</label>
        </div>
        <table id="contest">
            <tr>
                <th>Branch</th>
                <th>Remote</th>
                <th>Time</th>
                <th>Tests</th>
                <th>Result</th>
            </tr>
        </table>
        <br>
        <h3>Recent failures</h3>
        <table id="recent-fails">
            <tr>
                <th>Branch</th>
                <th>Remote</th>
                <th>Test</th>
                <th>Result</th>
                <th>Retry</th>
            </tr>
        </table>
        <br>
        <h3>Recent crashes</h3>
        <table id="recent-crashes">
            <tr>
                <th>Test</th>
                <th>Crashes</th>
            </tr>
        </table>
        <br>
        <h3>Tests with missing results</h3>
        <table id="test-presence">
            <tr>
                <th>Test</th>
                <th># missing</th>
            </tr>
        </table>
    </div>
</div>
<div class="row">
    <div class="column">
        <canvas id="run-time"></canvas>
    </div>
    <div class="column">
        <canvas id="db-size"></canvas>
    </div>
    <div class="column">
        <canvas id="process-time"></canvas>
    </div>
</div>
<div class="row">
    <div class="column">
        <div id="contest-filters">
            <h3>Patchwork reporting</h3>
            <p id="cf-execs"></p>
            <h4>Ignored tests:</h4>
            <table id="cf-tests">
                <tr id="cf-tests-hdr">
                </tr>
            </table>
            <p id="cf-crashes"></p>
        </div>
    </div>
    <div class="column">
        <table id="contest-purgatory">
            <h3>Not reporting to patchwork:</h3>
            <tr>
                <th>Branch</th>
                <th>Remote</th>
                <th>Time</th>
                <th>Tests</th>
                <th>Result</th>
            </tr>
        </table>
    </div>
</div>
</body>
</html>
